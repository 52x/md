title: 书呆子的概率题
date: 2016-2-16 21:34:43
categories: Mathématiques|数字游戏
tags: [数学, 概率, MIT]
---

重构几个有趣的初级概率题，先从小明的冷笑话讲起。

一天老师在班里举行讲笑话大赛，轮到小明了。
小明：“不笑是傻蛋。”
全班停了一秒，全都笑了。
老师：“哈哈，滚出去，哈哈。。”

于是小明一滚就不知道滚到哪里去了。

<!-- more -->

## 故事一 小明打乒乓

小明滚到体育馆去打乒乓。乒乓馆正在打擂台赛，卫冕冠军小强正在等待新人挑战。
小明和旺财一路打到决赛。
要挑战卫冕冠军，小明和旺财首先要打一轮两场比赛。如果其中任意一个赢了两场，便可以打第二轮挑战小强。如果小强能够赢下第二轮中的任意一场，则保留冠军头衔，否则新冠军便是小明或者旺财。(也就是说，如果小强拿下第二轮的第一场，第二场就不用再进行。)

另外还有一些条件，通过比赛记录，计算机给出了三组对抗胜算的概率：

1. 小明胜旺财: $0.6$
2. 小强胜小明: $0.5$
3. 小强胜旺财: $0.7$

每场比赛之间没有任何关联性，我们想知道：

1. 小强卫冕的概率
2. 如果第二轮比赛确实发生了：
	2.1 小明夺冠的概率
	2.2 小强卫冕的概率
3. 如果第二轮确实发生了，但只进行了一场，那么小明在第一轮胜出的条件概率是多少？

## 故事二 小明碰运气

滚出学校的路上，小明碰到一个路边游戏摊，游戏摊给了一个像电路板一样的房间，房间里每道门都有一个概率$p$可以打开，交10块钱就可以进去碰运气，如果能从A走到B，那么可以赢100块钱。

![math1](http://7xndoy.com1.z0.glb.clouddn.com/Math1-pic1.jpg)

小明最终拿到100块钱的概率是多少？

## 故事三 小明寻情记

小明有女友在A城，有梦中情人在B城，老师上周没收他手机的时候发现了他丰富的感情生活。据聊天内容推测，小明离家出走到A城的几率是$0.4$，小明去B城的几率是$0.6$。(不要问我为什么。)

老师一想不行啊，走丢了我的年终奖就没了啊，那我得找啊，她掐指一算：

1. 如果小明去会女朋友了，她找到他的概率是$0.25$;
2. 如果小明去追求梦中情人了，她找到他的概率是$0.15$;
3. 小明不大可能从A城流窜到B城，反之也不大可能;
4. 老师只有白天找小明，要去另一座城就要熬夜过去;
5. 小明出走前就有私奔倾向，如果老师当天找到则小明不会拒绝跟她回学校；第二天找到则跟她回学校的几率变成$2/3$。依次类推，如果老师在第n天找到小明，则小明跟她回去的几率为$2/(n+1)$。

那么问题来了：

1. 如果老师先从A城找起，且第一天没有找到小明，那小明仍然在A城的概率是多少？
2. 老师左右手互搏(左右手实力相当)，左手赢了先去A城，反之去B城，最终她第一天就找到了小明且带回学校记大过处分。老师先在A城搜索的概率是多少？
3. 老师决定先去A城找两天小明。
	3.1 她在第二天找到小明并成功带回家的概率是多少？
	3.2 已知老师第一天没有找到小明，那她第二天没能将小明带回学校的概率是多少？
4. 老师先在A城找了三天然后第四天在B城找，最终精疲力竭地在第四天找到了小明。她最终能把小明带回学校的概率是多少？

------------------------------------------------------

## 小明来一本正经地揭晓答案
### 结局一 小明打乒乓
先列几个事件$A$, $B$, $C$：
> * 小明胜旺财: $P(A) = 0.6$
> * 小明胜小强: $P(B) = 1 - 0.5 = 0.5$
> * 旺财胜小强: $P(C) = 1- 0.7 = 0.3$

另有事件：
> * $D$: 小强卫冕
> * $R2$: 第二轮竞赛发生
> * $M$: 小明夺冠
> * $W$: 旺财夺冠

那么事件的发展可以绘制成一棵树：
![tree1](http://7xndoy.com1.z0.glb.clouddn.com/Math1-pic2.png)

1. 小强卫冕的概率
> 每场比赛都是独立事件，所以我们只需要将树中所有灰色部分的相关路径的概率乘积加和：
>
$
\begin{aligned}
P(D)& = P(A) \times P(A^c)+P(A)^2 \times P(B^c)+P(A)^2 \times P(B) \times P(B^c) \\\
&+ P(A^c) \times P(A)+P(A^c)^2 \times P(C^c)+P(A^c)^2 \times P(C) \times P(C^c) \\\
&=.6 \times .4+.6^2 \times .5+.6^2\times.5 \times .5+.4 \times .6+.4^2 \times .7+.4^2 \times .3 \times .7 \\\
&=.8956\\\
\end{aligned}
$

2. 如果第二轮比赛确实发生了，分别求小明夺冠和小强卫冕的概率
> 求条件概率，第二轮比赛确实发生的概率有：
>
$
\begin{aligned}
P(R2) &= P(A)^2 + P(A^c)^2 \\\
& = .6^2 + .4^2 \\\
& = .52
\end{aligned}
$
>
> 在此基础上，我们要计算$P(M|R2)$和$P(D|R2)$
>
$
\begin{aligned}
P(M|R2) &= P(M \cap R2) / P(R2) \\\
& = .6^2 \times .5^2 / .52 \\\
& = .1731
\end{aligned}
$
>
$
\begin{aligned}
P(D|R2) &= P(D \cap R2) / P(R2) \\\
& =  (P(A)^2 \times P(B^c)+P(A)^2 \times P(B) \times P(B^c) \\\
& + P(A^c)^2 \times P(C^c)+P(A^c)^2 \times P(C) \times P(C^c))/P(R2) \\\
&=(.6^2 \times .5+.6^2 \times.5 \times  .5+.4^2 \times .7+.4^2\times.3 \times .7)/.52 \\\
& = .7992
\end{aligned}
$

3. 如果第二轮确实发生了，但只进行了一场，那么小明在第一轮胜出的条件概率是多少？
> “第二轮只进行一场比赛就结束”记为事件$L$
>
$
\begin{aligned}
P(L) &= P(A)^2 \times P(B^c) + P(A^c)^2 \times P(C^c) \\\
&= .6^2 \times .5 + .4^2 \times .7 \\\
&= .292
\end{aligned}
$
>
> 将“小明赢得第一轮”记为事件AA，则这个问题实际上是要求解$P(AA|L)$:
>
$
\begin{aligned}
P(AA|L) &= P(AA \cap L)/P(L) \\\
&= .6^2 \times .5 / .292 \\\
&= .6164
\end{aligned}
$

### 结局二 小明碰运气
> 房间的三个部分均为独立事件，那么我们可以先拆看分别看这三个事件的概率$P1$, $P2$, $P3$:
>
$
\begin{aligned}
P1 = p
\end{aligned}
$
>
> 第三部分只要两个门至少有一个们能打开，就可以通过，那么我们只需要计算两个门都不能打开的概率，然后用$1$减去此概率即可：
>
$
\begin{aligned}
P3 &= 1 - (1-p)^2
\end{aligned}
$
>
> 第二部分较复杂，三个并联的门作为一组和另一个门串联在一起，然后这个大组合又跟另一个门并联在一起。姑且将这两条线各自通畅视为事件$G1$和$G2$，$G1$又分为 $G11$ 和 $G12$。类似房间第三部分通路的计算逻辑，如果这三组都不通，则小明无法通过房间的第二部分。
>
$
\begin{aligned}
P(G11) &= 1-(1-p)^3 \\\
P(G1^c) &= 1 - P(G11) \times P(G12) \\\
&= 1 - \\{1-[1 -(1-p)^3]\\} \times p) \\\
&= 1 - p \times (1-p)^3 \\\
P(G2^c) &= 1-p \\\
P2 &= 1- P(G1^c) \times P(G2^c) \\\
& = 1 - (1-p) \times [1 - p \times (1-p)^3]
\end{aligned}
$
>
> 整合起来，小明通过这个房间最终拿到钱的概率是：
> 
$
\begin{aligned}
P &= P1 \times P3 \times P2 \\\
&= p \times [1 - (1-p)^2] \times \\{1 - (1-p) \times [1 - p \times (1-p)^3]\\}
\end{aligned}
$
>
> 小明掐指一算……觉得还是要个计算器算得快……

### 结局三 小明寻情记

先把事件列出来：
> * 小明去A城: $P(A) = 0.4$
> * 小明去B城: $P(B) = 0.6$
> * 老师在A城找到小明: $P(F|A) = 0.25$
> * 老师在B城找到小明: $P(F|B) = 0.15$
> * 老师第1天找到小明并带回: $P(R_1|F) = 1$
> * 老师第i天$(i>1)$找到小明并带回: $P(R_i|F) = 2/(i+1)$


-------------------------------

## 概率之外的东西
写这篇其实也是想看看hexo现在公式转化的功能有没有健全。
在没有添加任何plugin的情况下，已经可以写出如上的公式了。
要注意的是表示公式换行的`\\`以及表示花括号的`\{`和`\}`，都需要在左边额外添加一个`\`用于hexo的编译。